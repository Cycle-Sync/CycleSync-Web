{% extends "core/base.html" %}
{% load static %}

{% block content %}
<style>
  /* Card container styling */
  .chart-card {
    width: 300px;
    margin: 2rem auto;
    margin-left: 2rem;
    background: #fff4f8; /* Slate-800 background */
    
    padding: 1rem;
  }
  .container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
  }
  button {
    background-color: #FF6EC7; /* Slate-800 background */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }
  button:hover {
    background-color: #FF6EC9; /* Slate-800 background */
    transform: scale(1.55);
    transition: transform 0.2s ease-in-out;
  }
</style>

<section class="container">
  <div class="chart-card">
    <h2 class="text-xl font-bold text-center mb-4" style="color:black;">Intro to Your Hormone kitðŸªž</h2>
    <img src="{% static 'img/hormonkit.webp' %}" alt="hormonelevels" style="width: 100%; height: 250px; border-radius: 0.2rem;" />
  </div>
  <div>
    <div id="hormoneChart" class="chart-card" style="height: 300px"></div>
  </div>
  <div class="chart-card">
    <h2 class="text-xl font-bold text-center mb-4" style="color:black;">ðŸŒ·ðŸ’—Add your logs Today!ðŸ«§ðŸŒ¸ðŸ’ž</h2>
    <span><a href="{% url 'daily_log' %}"><button>Track Your Logs Today! </button></a></span>
    </div>
</section>
<section class="container">
  <div class="chart-card">
    <h2 class="text-xl font-bold text-center mb-4" style="color:black;">What to KnowðŸŽ€</h2>
    <img src="{% static 'img/readcycle' %}" alt="cycleinfo" style="width: 100%; height: 200px; border-radius: 0.2rem;" />
  </div>
</section>
<!-- 1. Load ECharts from jsDelivr CDN -->
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

<script>
  // 2. Helper for Gaussian bell curves
  function gaussian(x, mu, sigma) {
    return Math.exp(-Math.pow(x - mu, 2) / (2 * sigma * sigma));
  }

  // 3. Generate data arrays for a 30-day cycle
  const days = Array.from({ length: 30 }, (_, i) => i + 1);
  const FSH = days.map(
    (d) => 5 + 2 * gaussian(d, 1, 5) + 0.5 * Math.sin((d / 30) * 2 * Math.PI)
  );
  const LH = days.map((d) => 1 + 10 * gaussian(d, 14, 1.5));
  const Estrogen = days.map(
    (d) => 5 + 8 * gaussian(d, 12, 3) + 2 * gaussian(d, 21, 4)
  );
  const Progesterone = days.map((d) => 1 + 5 * gaussian(d, 21, 3));

  // 4. Initialize the chart
  const chartDom = document.getElementById("hormoneChart");
  const myChart = echarts.init(chartDom);

  // 5. Configure the stunning UI options
  const option = {
    title: {
      text: "Hormone Levels During a 30-Day Cycle",
      left: "center",
      textStyle: { color: "black", fontSize: 22, fontWeight: "bold" },
    },
    tooltip: { trigger: "axis" },
    legend: {
      top: 40,
      data: ["FSH", "LH", "Estradiol", "Progesterone"],
      textStyle: { color: "black" },
    },
    grid: {
      left: "5%",
      right: "5%",
      bottom: "10%",
      containLabel: true,
    },
    xAxis: {
      type: "category",
      data: days,
      axisLine: { lineStyle: { color: "black" } },
      axisLabel: { color: "black" },
      name: "Day of Cycle",
      nameTextStyle: { color: "black" },
    },
    yAxis: {
      type: "value",
      axisLine: { lineStyle: { color: "black" } },
      axisLabel: { color: "black" },
      name: "Relative Level",
      nameTextStyle: { color: "black" },
    },
    series: [
      {
        name: "FSH",
        type: "line",
        smooth: true,
        data: FSH,
        lineStyle: { width: 3, color: "#FF6EC7" },
      },
      {
        name: "LH",
        type: "line",
        smooth: true,
        data: LH,
        lineStyle: { width: 3, color: "#1ABC9C" },
      },
      {
        name: "Estradiol",
        type: "line",
        smooth: true,
        data: Estrogen,
        lineStyle: { width: 3, color: "#9B59B6" },
      },
      {
        name: "Progesterone",
        type: "line",
        smooth: true,
        data: Progesterone,
        lineStyle: { width: 3, color: "#F39C12" },
      },
    ],
    backgroundColor: "transparent",
  };

  // 6. Render it!
  myChart.setOption(option);
</script>
{% endblock %}
