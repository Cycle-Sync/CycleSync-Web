{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}CycleSyNCðŸ«§{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-7VZt+3gJt6FjC03Tvpc4tpDqFQZoEFR+FlH9mt2zhYdiuS0HfM5woIhV4x3JiJf7ka1O77Ih/I7ReO1r5XFPmw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
      #logo {
        display: inline-block;
        font-size: 2rem;
        color: #ff69b4;
      }
      :root {
        --bg-start: #ffe6f0;
        --bg-end: #ffffff;
        --bg-angle: 145deg;
        --shadow-light: rgba(255, 255, 255, 0.7);
        --shadow-dark: rgba(0, 0, 0, 0.15);
        --accent: rgba(255, 105, 180, 0.2);
      }
      .neumo-heading {
        text-align: center;
        margin-bottom: 1.5rem;
        color: #333;
        text-shadow: 1px 1px 2px var(--shadow-light);
      }
      body {
        background: linear-gradient(var(--bg-angle), var(--bg-start), var(--bg-end));
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        flex-direction: column;
      }
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background-color: white;
        padding: 10px 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background-color: #f8f9fa;
      }
      .nav-links {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        flex-grow: 1;
      }
      .menu-icon {
        display: none;
        font-size: 24px;
        cursor: pointer;
      }
      nav a {
        text-decoration: none;
        color: #333;
        font-weight: bold;
        padding: 0.5rem;
      }
      nav a:hover {
        color: #ff69b4;
        transform: scale(1.75);
        transition: transform 0.3s ease;
      }
      main {
        margin-top: 80px;
      }
      .alert-success {
        background-color: #d4edda;
        color: #155724;
        padding: 0.75rem 1.25rem;
        border-radius: 0.25rem;
        margin-bottom: 1rem;
      }
      .profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #ffffff;
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
      }
      .alert-danger {
        background-color: #f8d7da;
        color: #721c24;
        padding: 0.75rem 1.25rem;
        border-radius: 0.25rem;
        margin-bottom: 1rem;
      }
      .mess {
        top: 20px;
        align-items: center;
        justify-content: center;
        display: flex;
        z-index: 1000;
        width: 100%;
        padding: 0 1rem;
      }
      @media (max-width: 768px) {
        .nav-links {
          display: none;
          flex-direction: column;
          position: absolute;
          top: 100%; /* Changed from 60px to ensure it appears below the header */
          left: 0;
          right: 0;
          background-color: #f8f9fa;
          padding: 1rem;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
          z-index: 2000; /* Added to ensure it appears above other elements */
        }
        .nav-links.active {
          display: flex;
        }
        .nav-links a {
          padding: 1rem;
          width: 100%;
          text-align: center;
        }
        .menu-icon {
          display: block;
        }
      }
      @media (min-width: 769px) {
        .menu-icon {
          display: none;
        }
      }
      @media (max-width: 480px) {
        .profile-img {
          width: 30px;
          height: 30px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        {% if user.is_authenticated %}
        <a href="{% url 'dashboard' %}">
          <span id="logo"><b>C</b>ycle<b>S</b>y<i>NC</i> <sup>ðŸ«§</sup></span>
        </a>
        <div class="nav-links">
          <a href="{% url 'dashboard' %}"><img src="{% static 'img/home.svg' %}" alt="home" style="width:24px; height:24px;" /></a>
          <a href="{% url 'profile' %}">
            <img src="{{ request.user.profile.profile_image.url }}" alt="profile" class="profile-img" />
            <sup style="color:#ff69b4;">{{request.user.username}}</sup>
          </a>
          <a href="{% url 'calendar' %}"><img src="{% static 'img/calendar-clock.svg' %}" alt="calendar" style="width:24px; height:24px;" /></a>
          <a href="{% url 'daily_log' %}">Logs</a>
          <a href="#">Read</a>
          <a href="{% url 'logout' %}"><img src="{% static 'img/logout.svg' %}" alt="logout" /></a>
        </div>
        {% endif %}
        <span class="menu-icon">â˜°</span>
      </nav>
      <div class="mess">
        {% if messages %}
        <div class="messages">
          {% for msg in messages %}
          <div class="alert {% if msg.tags == 'success' %}alert-success{% else %}alert-danger{% endif %}" role="alert">
            {{ msg }}
          </div>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </header>
    <main>{% block content %}{% endblock %}</main>
    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        anime({
          targets: "#logo",
          translateY: [
            { value: -10, duration: 600 },
            { value: 0, duration: 600 },
          ],
          scale: [
            { value: 1.1, duration: 600, easing: "easeOutQuad" },
            { value: 1.0, duration: 600, easing: "easeInQuad" },
          ],
          loop: true,
          delay: 500,
        });
        const menuIcon = document.querySelector('.menu-icon');
        const navLinks = document.querySelector('.nav-links');
        menuIcon.addEventListener('click', function () {
          navLinks.classList.toggle('active');
        });
      });
    </script>
  </body>
</html>